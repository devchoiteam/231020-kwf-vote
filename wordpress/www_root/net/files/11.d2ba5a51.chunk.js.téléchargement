(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1053:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SignupPartnerResponse=void 0;var n,o=t(1394),a=(n=o)&&n.__esModule?n:{default:n};r.SignupPartnerResponse=o.SignupPartnerResponse,r.default=a.default},1394:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SignUpContainer=r.getPlatformOrigin=void 0,r.getReferral=R,r.getSignupPartnerInput=I;var n=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r}(t(0)),o=T(t(94)),a=T(t(1130)),u=t(1195),i=t(437),s=t(154),c=t(155),l=t(1395),p=T(t(1396)),f=T(t(442)),d=t(235),m=t(443),h=t(1196),g=t(153),y=T(t(239)),v=T(t(1197)),P=T(t(1133)),b=t(237),S=T(t(1437)),w=T(t(1134)),_=t(1194),C=t(92),O=t(1438),U=T(t(463));function T(e){return e&&e.__esModule?e:{default:e}}var M,N=(M=function(e,r){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])})(e,r)},function(e,r){function t(){this.constructor=e}M(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}),E=function(){return(E=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++)for(var o in r=arguments[t])Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o]);return e}).apply(this,arguments)},k=function(e,r,t,n){return new(t||(t=Promise))((function(o,a){function u(e){try{s(n.next(e))}catch(e){a(e)}}function i(e){try{s(n.throw(e))}catch(e){a(e)}}function s(e){var r;e.done?o(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(u,i)}s((n=n.apply(e,r||[])).next())}))},A=function(e,r){var t,n,o,a,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return u.label++,{value:a[1],done:!1};case 5:u.label++,n=a[1],a=[0];continue;case 7:a=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){u=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){u.label=a[1];break}if(6===a[0]&&u.label<o[1]){u.label=o[1],o=a;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(a);break}o[2]&&u.ops.pop(),u.trys.pop();continue}a=r.call(e,u)}catch(e){a=[6,e],n=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};function R(e){var r=a.default.parse(e);return{referralCode:r.referral_code,referralSource:r.referral_source}}var j=r.getPlatformOrigin=function(e){var r=(0,l.getUTMParameterValue)(e,C.UTMParameters.utmSource),t=(0,U.default)(h.PlatformOrigin).find((function(e){return e===r}));return t?{platformOrigin:t}:(0,O.isReferrerEqGrabcom)()?{platformOrigin:h.PlatformOrigin.grabcom}:{platformOrigin:h.PlatformOrigin.register}};function I(e){var r=(0,d.formatPhoneNumberForBackendParameter)(e.phone.phoneNumber,e.phone.countryCode,"NATIONAL");return{email:e.email,phoneNumber:r,cityID:e.city.cityID,firstName:e.firstName,lastName:e.lastName,serviceTypeCode:e.serviceTypeCode,provider:e.provider,externalToken:e.externalToken,referralCode:e.referralCode,agreedTermsConditions:e.terms_agreement,consent:{agreedPrivacyPolicy:e.terms_agreement}}}var F=function(e){function r(){var r=null!==e&&e.apply(this,arguments)||this;return r.state={loading:!1,knownErrorRender:function(){return null}},r.renderError=function(){return(0,r.state.knownErrorRender)()},r.handleFormOnChange=function(e){r.props.reduxActions.updateSignUpFields(e)},r.handleSignUp=function(e){return k(r,void 0,void 0,(function(){var r,t,n,a,u,i;return A(this,(function(s){switch(s.label){case 0:t=E(E(E(E({},R(r=this.props.location.search)),(0,l.getUTMSources)(r)),I(e)),j(r)),this.showLoading(),n="",s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.props.spamTokenGenerator.getTokenForAction(b.GOOGLE_RECAPTCHAV3_ACTIONS.SIGN_UP)];case 2:return n=s.sent(),[3,4];case 3:return a=s.sent(),console.error(a),[3,4];case 4:return s.trys.push([4,6,,7]),[4,this.props.signupPartner({variables:{input:E(E({},(0,p.default)(t)),{recaptchaResponse:n})}})];case 5:return u=s.sent(),this.handleSignUpSuccess(e,u),[3,7];case 6:return i=s.sent(),this.hideLoading(),(0,c.isApolloError)(i)?this.handleSignUpError(i):o.default.captureException(i),[3,7];case 7:return[2]}}))}))},r.handleSignUpSuccess=function(e,t){r.hideLoading();var n=t.data.signupPartner;n&&(r.props.history.push("/signup-success"),f.default.trackSignupSuccess(e.city.countryCode,e.serviceTypeCode,e.phone.phoneNumber,n.phoneNumber,n.email))},r.handleSignUpError=function(e){return _.knownSignUpErrorsAndWhatToRender.some((function(t){return(0,c.handleKnownErrorCodeDetected)(e,t.errorCode,(function(){return r.setState({knownErrorRender:t.render})}))}))},r}return N(r,e),r.prototype.componentDidMount=function(){f.default.trackStage(f.default.Stage.ShortForm),this.props.reduxActions.updateFlow(b.AUTH_FLOW.SIGN_UP)},r.prototype.showLoading=function(){this.setState({loading:!0})},r.prototype.hideLoading=function(){this.setState({loading:!1})},r.prototype.render=function(){return(0,g.isAuthenticated)()?n.createElement(u.Redirect,{to:"/application"}):n.createElement("div",{className:"SignUpContainer"},this.renderError(),n.createElement(v.default,{countryCode:this.props.currentCountryCode,formState:this.props.formState,loading:this.state.loading,onSubmit:this.handleSignUp,onChange:this.handleFormOnChange}),n.createElement(P.default,null))},r}(n.PureComponent);r.SignUpContainer=F;var x=(0,i.compose)((0,s.connect)((function(e,r){var t=R(r.location.search);return{formState:E({referralCode:{value:t.referralCode}},e.form.signUp)}}),(function(e){return{reduxActions:{updateSignUpFields:function(r){return e((0,m.updateSignUpFields)(r))},updateFlow:function(r){return e((0,m.updateFlow)(r))}}}})),y.default,(0,i.graphql)(S.default,{name:"signupPartner"}),w.default);r.default=x(F)},1395:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getUTMSources=function(e){var r=n.default.parse(e);return(0,o.default)({utmSource:r[u.UTMParameters.utmSource],utmMedium:r[u.UTMParameters.utmMedium],utmTerm:r[u.UTMParameters.utmTerm],utmContent:r[u.UTMParameters.utmContent],utmCampaign:r[u.UTMParameters.utmCampaign]},a.default)},r.getUTMParameterValue=function(e,r){return n.default.parse(e)[r]||""};var n=i(t(1130)),o=i(t(242)),a=i(t(98)),u=t(92);function i(e){return e&&e.__esModule?e:{default:e}}},1396:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=a(t(98)),o=a(t(242));function a(e){return e&&e.__esModule?e:{default:e}}r.default=function(e){return(0,o.default)(e,(function(e){return!1===e||(0,n.default)(e)}))}},1437:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,o,a=t(1083),u=(n=a)&&n.__esModule?n:{default:n};r.default=(0,u.default)(o||(o=function(e,r){return Object.defineProperty?Object.defineProperty(e,"raw",{value:r}):e.raw=r,e}(["\n  mutation SignupPartnerMutation($input: SignupPartnerInput!) {\n    signupPartner(input: $input) {\n      id\n      phoneNumber\n      email\n      cityCode\n      firstName\n      lastName\n      grabID\n    }\n  }\n"],["\n  mutation SignupPartnerMutation($input: SignupPartnerInput!) {\n    signupPartner(input: $input) {\n      id\n      phoneNumber\n      email\n      cityCode\n      firstName\n      lastName\n      grabID\n    }\n  }\n"])))},1438:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.isReferrerEqGrabcom=function(){switch((window.Grab.config.appEnv||"").toUpperCase()){case"PRODUCTION":return/https:\/\/(www.grab.com)\/[a-z]{2}\/driver(\/)?[a-z]*/g.test(document.referrer);case"STAGING":return/https:\/\/(www.stg-myteksi.com)\/[a-z]{2}\/driver(\/)?[a-z]*/g.test(document.referrer);default:return!1}}}}]);
//# sourceMappingURL=11.d2ba5a51.chunk.js.map